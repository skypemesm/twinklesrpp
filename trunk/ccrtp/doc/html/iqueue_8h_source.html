<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>ccRTP: iqueue.h Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
    </ul>
  </div>
<h1>iqueue.h</h1><a href="iqueue_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// Copyright (C) 2001,2002,2004 Federico Montesino Pouzols &lt;fedemp@altern.org&gt;.</span>
<a name="l00002"></a>00002 <span class="comment">//</span>
<a name="l00003"></a>00003 <span class="comment">// This program is free software; you can redistribute it and/or modify</span>
<a name="l00004"></a>00004 <span class="comment">// it under the terms of the GNU General Public License as published by</span>
<a name="l00005"></a>00005 <span class="comment">// the Free Software Foundation; either version 2 of the License, or</span>
<a name="l00006"></a>00006 <span class="comment">// (at your option) any later version.</span>
<a name="l00007"></a>00007 <span class="comment">//</span>
<a name="l00008"></a>00008 <span class="comment">// This program is distributed in the hope that it will be useful,</span>
<a name="l00009"></a>00009 <span class="comment">// but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00010"></a>00010 <span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00011"></a>00011 <span class="comment">// GNU General Public License for more details.</span>
<a name="l00012"></a>00012 <span class="comment">//</span>
<a name="l00013"></a>00013 <span class="comment">// You should have received a copy of the GNU General Public License</span>
<a name="l00014"></a>00014 <span class="comment">// along with this program; if not, write to the Free Software</span>
<a name="l00015"></a>00015 <span class="comment">// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span>
<a name="l00016"></a>00016 <span class="comment">//</span>
<a name="l00017"></a>00017 <span class="comment">// As a special exception, you may use this file as part of a free software</span>
<a name="l00018"></a>00018 <span class="comment">// library without restriction.  Specifically, if other files instantiate</span>
<a name="l00019"></a>00019 <span class="comment">// templates or use macros or inline functions from this file, or you compile</span>
<a name="l00020"></a>00020 <span class="comment">// this file and link it with other files to produce an executable, this</span>
<a name="l00021"></a>00021 <span class="comment">// file does not by itself cause the resulting executable to be covered by</span>
<a name="l00022"></a>00022 <span class="comment">// the GNU General Public License.  This exception does not however</span>
<a name="l00023"></a>00023 <span class="comment">// invalidate any other reasons why the executable file might be covered by</span>
<a name="l00024"></a>00024 <span class="comment">// the GNU General Public License.</span>
<a name="l00025"></a>00025 <span class="comment">//</span>
<a name="l00026"></a>00026 <span class="comment">// This exception applies only to the code released under the name GNU</span>
<a name="l00027"></a>00027 <span class="comment">// ccRTP.  If you copy code from other releases into a copy of GNU</span>
<a name="l00028"></a>00028 <span class="comment">// ccRTP, as the General Public License permits, the exception does</span>
<a name="l00029"></a>00029 <span class="comment">// not apply to the code that you add in this way.  To avoid misleading</span>
<a name="l00030"></a>00030 <span class="comment">// anyone as to the status of such modified files, you must delete</span>
<a name="l00031"></a>00031 <span class="comment">// this exception notice from them.</span>
<a name="l00032"></a>00032 <span class="comment">//</span>
<a name="l00033"></a>00033 <span class="comment">// If you write modifications of your own for GNU ccRTP, it is your choice</span>
<a name="l00034"></a>00034 <span class="comment">// whether to permit this exception to apply to your modifications.</span>
<a name="l00035"></a>00035 <span class="comment">// If you do not wish that, delete this exception notice.</span>
<a name="l00036"></a>00036 <span class="comment">//</span>
<a name="l00037"></a>00037 
<a name="l00044"></a>00044 <span class="preprocessor">#ifndef CCXX_RTP_IQUEUE_H_</span>
<a name="l00045"></a>00045 <span class="preprocessor"></span><span class="preprocessor">#define CCXX_RTP_IQUEUE_H_</span>
<a name="l00046"></a>00046 <span class="preprocessor"></span>
<a name="l00047"></a>00047 <span class="preprocessor">#include &lt;<a class="code" href="queuebase_8h.html" title="Base classes for RTP queues.">ccrtp/queuebase.h</a>&gt;</span>
<a name="l00048"></a>00048 <span class="preprocessor">#include &lt;<a class="code" href="_crypto_context_8h.html">ccrtp/CryptoContext.h</a>&gt;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor">#include &lt;list&gt;</span>
<a name="l00051"></a>00051 
<a name="l00052"></a>00052 <span class="preprocessor">#ifdef  CCXX_NAMESPACES</span>
<a name="l00053"></a>00053 <span class="preprocessor"></span><span class="keyword">namespace </span>ost {
<a name="l00054"></a>00054 <span class="preprocessor">#endif</span>
<a name="l00055"></a>00055 <span class="preprocessor"></span>
<a name="l00070"></a><a class="code" href="class_members.html">00070</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_members.html" title="members and senders accounting">Members</a>
<a name="l00071"></a>00071 {
<a name="l00072"></a>00072 <span class="keyword">public</span>:
<a name="l00073"></a>00073         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00074"></a><a class="code" href="class_members.html#a12075b685cfc7b7aedfe36751e555e1b">00074</a>         setMembersCount(uint32 n)
<a name="l00075"></a>00075         { members = n; }
<a name="l00076"></a>00076 
<a name="l00077"></a>00077         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00078"></a><a class="code" href="class_members.html#a16a4983a9e1ce50bcac404df16a24b64">00078</a>         increaseMembersCount()
<a name="l00079"></a>00079         { members++; }
<a name="l00080"></a>00080 
<a name="l00081"></a>00081         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00082"></a><a class="code" href="class_members.html#a74b8bc80f76cf1a39e4ecfa04dedc889">00082</a>         decreaseMembersCount()
<a name="l00083"></a>00083         { members--; }
<a name="l00084"></a>00084 
<a name="l00085"></a>00085         <span class="keyword">inline</span> uint32
<a name="l00086"></a><a class="code" href="class_members.html#a205cd2ecae12d4b9311a4dc3b88bfa21">00086</a>         getMembersCount()<span class="keyword"> const</span>
<a name="l00087"></a>00087 <span class="keyword">        </span>{ <span class="keywordflow">return</span> members; }
<a name="l00088"></a>00088 
<a name="l00089"></a>00089         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00090"></a><a class="code" href="class_members.html#a5bc22bc2c74f5245e0be8898cdf4a811">00090</a>         setSendersCount(uint32 n)
<a name="l00091"></a>00091         { activeSenders = n; }
<a name="l00092"></a>00092 
<a name="l00093"></a>00093         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00094"></a><a class="code" href="class_members.html#a48e49c052239935728d015e2fcbd4c48">00094</a>         increaseSendersCount()
<a name="l00095"></a>00095         { activeSenders++; }
<a name="l00096"></a>00096 
<a name="l00097"></a>00097         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00098"></a><a class="code" href="class_members.html#a593044e78d5cb4dc29b842433266c146">00098</a>         decreaseSendersCount()
<a name="l00099"></a>00099         { activeSenders--; }
<a name="l00100"></a>00100 
<a name="l00101"></a>00101         <span class="keyword">inline</span> uint32
<a name="l00102"></a><a class="code" href="class_members.html#a25289bdc35d487d930e146605d7f3f9f">00102</a>         getSendersCount()<span class="keyword"> const</span>
<a name="l00103"></a>00103 <span class="keyword">        </span>{ <span class="keywordflow">return</span> activeSenders; }
<a name="l00104"></a>00104 
<a name="l00105"></a>00105 <span class="keyword">protected</span>:
<a name="l00106"></a><a class="code" href="class_members.html#ab034151cb406289e777166b484a5e9aa">00106</a>         <a class="code" href="class_members.html" title="members and senders accounting">Members</a>() :
<a name="l00107"></a>00107                 members(0),
<a name="l00108"></a>00108                 activeSenders(0)
<a name="l00109"></a>00109         { }
<a name="l00110"></a>00110 
<a name="l00111"></a><a class="code" href="class_members.html#aeb50928fe3a9f153f9b4bfd181696251">00111</a>         <span class="keyword">inline</span> <span class="keyword">virtual</span> ~<a class="code" href="class_members.html" title="members and senders accounting">Members</a>()
<a name="l00112"></a>00112         { }
<a name="l00113"></a>00113 
<a name="l00114"></a>00114 <span class="keyword">private</span>:
<a name="l00116"></a>00116         uint32 members;
<a name="l00118"></a>00118         uint32 activeSenders;
<a name="l00119"></a>00119 };
<a name="l00120"></a>00120 
<a name="l00127"></a><a class="code" href="class_sync_source_handler.html">00127</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_sync_source_handler.html" title="SyncSource objects modification methods.">SyncSourceHandler</a>
<a name="l00128"></a>00128 {
<a name="l00129"></a>00129 <span class="keyword">public</span>:
<a name="l00136"></a>00136         <span class="keyword">inline</span> <span class="keywordtype">void</span>*
<a name="l00137"></a><a class="code" href="class_sync_source_handler.html#a1f835cb89ba9c5102e948a8c0e0102b2">00137</a>         getLink(<span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source)<span class="keyword"> const</span>
<a name="l00138"></a>00138 <span class="keyword">        </span>{ <span class="keywordflow">return</span> source.getLink(); }
<a name="l00139"></a>00139 
<a name="l00140"></a>00140         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00141"></a><a class="code" href="class_sync_source_handler.html#ab81fe348ff9772693fc27ae4751d24b4">00141</a>         setLink(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, <span class="keywordtype">void</span>* link)
<a name="l00142"></a>00142         { source.setLink(link); }
<a name="l00143"></a>00143 
<a name="l00144"></a>00144         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00145"></a><a class="code" href="class_sync_source_handler.html#a380179ca7c9641eafa1c8d3c223de2db">00145</a>         setParticipant(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, <a class="code" href="class_participant.html" title="A class of objects representing remote participants (RTP applications) in a multimedia...">Participant</a>&amp; p)
<a name="l00146"></a>00146         { source.setParticipant(p); }
<a name="l00147"></a>00147 
<a name="l00148"></a>00148         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00149"></a><a class="code" href="class_sync_source_handler.html#ab25f7c1d845ea466cf955b4b6be45165">00149</a>         setState(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, <a class="code" href="class_sync_source.html#ae1ed2a19bbfd03de69fbdfc044f2c5dc" title="Synchronization source states during an RTP session.">SyncSource::State</a> ns)
<a name="l00150"></a>00150         { source.setState(ns); }
<a name="l00151"></a>00151 
<a name="l00152"></a>00152         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00153"></a><a class="code" href="class_sync_source_handler.html#aaafbdeb950f765f8f121eaf6688c7367">00153</a>         setSender(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, <span class="keywordtype">bool</span> active)
<a name="l00154"></a>00154         { source.setSender(active); }
<a name="l00155"></a>00155 
<a name="l00156"></a>00156         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00157"></a><a class="code" href="class_sync_source_handler.html#a47f7b8cf542dc9487062de7474304928">00157</a>         setDataTransportPort(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, tpport_t p)
<a name="l00158"></a>00158         { source.setDataTransportPort(p); }
<a name="l00159"></a>00159 
<a name="l00160"></a>00160         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00161"></a><a class="code" href="class_sync_source_handler.html#acd5da6c8029f6a3395b86488dd78e274">00161</a>         setControlTransportPort(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, tpport_t p)
<a name="l00162"></a>00162         { source.setControlTransportPort(p); }
<a name="l00163"></a>00163 
<a name="l00164"></a>00164         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00165"></a><a class="code" href="class_sync_source_handler.html#aa71d11242bd0acd3c7cb36065d4311dd">00165</a>         setNetworkAddress(<a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source, InetAddress addr)
<a name="l00166"></a>00166         { source.setNetworkAddress(addr); }
<a name="l00167"></a>00167 
<a name="l00168"></a>00168 <span class="keyword">protected</span>:
<a name="l00169"></a><a class="code" href="class_sync_source_handler.html#a5f2e5f637856c57bdac70c7ccb8664cf">00169</a>         <a class="code" href="class_sync_source_handler.html" title="SyncSource objects modification methods.">SyncSourceHandler</a>()
<a name="l00170"></a>00170         { }
<a name="l00171"></a>00171 
<a name="l00172"></a><a class="code" href="class_sync_source_handler.html#a3ede656f467571839d1f13d11c84f4d0">00172</a>         <span class="keyword">inline</span> <span class="keyword">virtual</span> ~<a class="code" href="class_sync_source_handler.html" title="SyncSource objects modification methods.">SyncSourceHandler</a>()
<a name="l00173"></a>00173         { }
<a name="l00174"></a>00174 };
<a name="l00175"></a>00175 
<a name="l00182"></a><a class="code" href="class_participant_handler.html">00182</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_participant_handler.html" title="Participant objects modification methods.">ParticipantHandler</a>
<a name="l00183"></a>00183 {
<a name="l00184"></a>00184 <span class="keyword">public</span>:
<a name="l00185"></a>00185         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00186"></a><a class="code" href="class_participant_handler.html#a0d8b6d3877d6643eda12bb2018f6e0b7">00186</a>         setSDESItem(<a class="code" href="class_participant.html" title="A class of objects representing remote participants (RTP applications) in a multimedia...">Participant</a>* part, <a class="code" href="group__rtcppacket.html#gaf6d38e5ccbbcdf2a24ebbd4fc5b4eeac" title="SDES items that may be carried in a Source DEScription RTCP packet.">SDESItemType</a> item,
<a name="l00187"></a>00187                     <span class="keyword">const</span> std::string&amp; val)
<a name="l00188"></a>00188         { part-&gt;setSDESItem(item,val); }
<a name="l00189"></a>00189 
<a name="l00190"></a>00190         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00191"></a><a class="code" href="class_participant_handler.html#ab905220f12970024aac76e02f0d20d66">00191</a>         setPRIVPrefix(<a class="code" href="class_participant.html" title="A class of objects representing remote participants (RTP applications) in a multimedia...">Participant</a>* part, <span class="keyword">const</span> std::string val)
<a name="l00192"></a>00192         { part-&gt;setPRIVPrefix(val); }
<a name="l00193"></a>00193 
<a name="l00194"></a>00194 <span class="keyword">protected</span>:
<a name="l00195"></a><a class="code" href="class_participant_handler.html#a8ab7d9a425e56c05c288fb890162af19">00195</a>         <a class="code" href="class_participant_handler.html" title="Participant objects modification methods.">ParticipantHandler</a>()
<a name="l00196"></a>00196         { }
<a name="l00197"></a>00197 
<a name="l00198"></a><a class="code" href="class_participant_handler.html#a593f3ffdc20022348329d6c886f3cd07">00198</a>         <span class="keyword">inline</span> <span class="keyword">virtual</span> ~<a class="code" href="class_participant_handler.html" title="Participant objects modification methods.">ParticipantHandler</a>()
<a name="l00199"></a>00199         { }
<a name="l00200"></a>00200 };
<a name="l00201"></a>00201 
<a name="l00208"></a><a class="code" href="class_application_handler.html">00208</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_application_handler.html" title="Application objects modification methods.">ApplicationHandler</a>
<a name="l00209"></a>00209 {
<a name="l00210"></a>00210 <span class="keyword">public</span>:
<a name="l00211"></a>00211         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00212"></a><a class="code" href="class_application_handler.html#afe4ac5029cb0b0d5f011ce81e7ede85d">00212</a>         addParticipant(<a class="code" href="class_r_t_p_application.html" title="An RTP application, holding identifying RTCP SDES item values.">RTPApplication</a>&amp; app, <a class="code" href="class_participant.html" title="A class of objects representing remote participants (RTP applications) in a multimedia...">Participant</a>&amp; part)
<a name="l00213"></a>00213         { app.addParticipant(part); }
<a name="l00214"></a>00214 
<a name="l00215"></a>00215         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00216"></a><a class="code" href="class_application_handler.html#a9bbc4b6c97169283f4675c98aadd9335">00216</a>         removeParticipant(<a class="code" href="class_r_t_p_application.html" title="An RTP application, holding identifying RTCP SDES item values.">RTPApplication</a>&amp; app,
<a name="l00217"></a>00217                           RTPApplication::ParticipantLink* pl)
<a name="l00218"></a>00218         { app.removeParticipant(pl); }
<a name="l00219"></a>00219 
<a name="l00220"></a>00220 <span class="keyword">protected</span>:
<a name="l00221"></a><a class="code" href="class_application_handler.html#ae06c6f4d57bb4d0ba947617df6dbcaeb">00221</a>         <a class="code" href="class_application_handler.html" title="Application objects modification methods.">ApplicationHandler</a>()
<a name="l00222"></a>00222         { }
<a name="l00223"></a>00223 
<a name="l00224"></a><a class="code" href="class_application_handler.html#aa526edea8fc2dab80b38f6723b7a7dd1">00224</a>         <span class="keyword">inline</span> <span class="keyword">virtual</span> ~<a class="code" href="class_application_handler.html" title="Application objects modification methods.">ApplicationHandler</a>()
<a name="l00225"></a>00225         { }
<a name="l00226"></a>00226 };
<a name="l00227"></a>00227 
<a name="l00235"></a><a class="code" href="class_conflict_handler.html">00235</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_conflict_handler.html" title="To track addresses of sources conflicting with the local one.">ConflictHandler</a>
<a name="l00236"></a>00236 {
<a name="l00237"></a>00237 <span class="keyword">public</span>:
<a name="l00238"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">00238</a>         <span class="keyword">struct </span><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>
<a name="l00239"></a>00239         {
<a name="l00240"></a>00240                 <a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>(InetAddress na,
<a name="l00241"></a>00241                                             tpport_t dtp, tpport_t ctp);
<a name="l00242"></a>00242 
<a name="l00243"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a4df65c5bb7379bb577288db55bfea8ac">00243</a>                 <span class="keywordtype">void</span> setNext(<a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>* nc)
<a name="l00244"></a>00244                 { next = nc; }
<a name="l00245"></a>00245 
<a name="l00246"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a4be3f96ac1fb4145b2db93516f26a093">00246</a>                 <span class="keyword">inline</span> <span class="keyword">const</span> InetAddress&amp; getNetworkAddress( )<span class="keyword"> const</span>
<a name="l00247"></a>00247 <span class="keyword">                </span>{ <span class="keywordflow">return</span> networkAddress; }
<a name="l00248"></a>00248 
<a name="l00249"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a9cc0e8ad922e2f14c2c0c6271a844bab">00249</a>                 <span class="keyword">inline</span> tpport_t getDataTransportPort()<span class="keyword"> const</span>
<a name="l00250"></a>00250 <span class="keyword">                </span>{ <span class="keywordflow">return</span> dataTransportPort; }
<a name="l00251"></a>00251 
<a name="l00252"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#abcdefb862782927efd0f0b1ed538917e">00252</a>                 <span class="keyword">inline</span> tpport_t getControlTransportPort()<span class="keyword"> const</span>
<a name="l00253"></a>00253 <span class="keyword">                </span>{ <span class="keywordflow">return</span> controlTransportPort; }
<a name="l00254"></a>00254 
<a name="l00255"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a93337a68e4b82d9c5425525683779de0">00255</a>                 InetAddress networkAddress;
<a name="l00256"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a668a4e99b15406d81293597886d33751">00256</a>                 tpport_t dataTransportPort;
<a name="l00257"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#af0be9ed401139f4080e955495a7d9b93">00257</a>                 tpport_t controlTransportPort;
<a name="l00258"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a7d51ea9d10ee834c1c79ed3e944026a6">00258</a>                 <a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>* next;
<a name="l00259"></a>00259                 <span class="comment">// arrival time of last data or control packet.</span>
<a name="l00260"></a><a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a5b6673f6aacfd1e071f3dd71ecb8dc38">00260</a>                 timeval lastPacketTime;
<a name="l00261"></a>00261         };
<a name="l00262"></a>00262 
<a name="l00267"></a>00267         <a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>* searchDataConflict(InetAddress na,
<a name="l00268"></a>00268                                                         tpport_t dtp);
<a name="l00273"></a>00273         <a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>* searchControlConflict(InetAddress na,
<a name="l00274"></a>00274                                                            tpport_t ctp);
<a name="l00275"></a>00275 
<a name="l00276"></a><a class="code" href="class_conflict_handler.html#ac6c5594445fd628222194cf3a657cf99">00276</a>         <span class="keywordtype">void</span> updateConflict(<a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>&amp; ca)
<a name="l00277"></a>00277         { gettimeofday(&amp;(ca.<a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html#a5b6673f6aacfd1e071f3dd71ecb8dc38">lastPacketTime</a>),NULL); }
<a name="l00278"></a>00278 
<a name="l00279"></a>00279         <span class="keywordtype">void</span> addConflict(<span class="keyword">const</span> InetAddress&amp; na, tpport_t dtp, tpport_t ctp);
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="keyword">protected</span>:
<a name="l00282"></a><a class="code" href="class_conflict_handler.html#ab179866b314afae1423581c318073bcd">00282</a>         <a class="code" href="class_conflict_handler.html" title="To track addresses of sources conflicting with the local one.">ConflictHandler</a>()
<a name="l00283"></a>00283         { firstConflict = lastConflict = NULL; }
<a name="l00284"></a>00284 
<a name="l00285"></a><a class="code" href="class_conflict_handler.html#a108fbdad827dcbe30c373046c8816462">00285</a>         <span class="keyword">inline</span> <span class="keyword">virtual</span> ~<a class="code" href="class_conflict_handler.html" title="To track addresses of sources conflicting with the local one.">ConflictHandler</a>()
<a name="l00286"></a>00286         { }
<a name="l00287"></a>00287 
<a name="l00288"></a><a class="code" href="class_conflict_handler.html#a6562e425bfd419b2af8c9d6df3caff17">00288</a>         <a class="code" href="struct_conflict_handler_1_1_conflicting_transport_address.html">ConflictingTransportAddress</a>* firstConflict, * lastConflict;
<a name="l00289"></a>00289 };
<a name="l00290"></a>00290 
<a name="l00301"></a><a class="code" href="class_membership_bookkeeping.html">00301</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a> :
<a name="l00302"></a>00302         <span class="keyword">public</span> <a class="code" href="class_sync_source_handler.html" title="SyncSource objects modification methods.">SyncSourceHandler</a>,
<a name="l00303"></a>00303         <span class="keyword">public</span> <a class="code" href="class_participant_handler.html" title="Participant objects modification methods.">ParticipantHandler</a>,
<a name="l00304"></a>00304         <span class="keyword">public</span> <a class="code" href="class_application_handler.html" title="Application objects modification methods.">ApplicationHandler</a>,
<a name="l00305"></a>00305         <span class="keyword">public</span> <a class="code" href="class_conflict_handler.html" title="To track addresses of sources conflicting with the local one.">ConflictHandler</a>,
<a name="l00306"></a>00306         <span class="keyword">private</span> <a class="code" href="class_members.html" title="members and senders accounting">Members</a>
<a name="l00307"></a>00307 {
<a name="l00308"></a>00308 <span class="keyword">public</span>:
<a name="l00309"></a><a class="code" href="class_membership_bookkeeping.html#a16aa1d1a8f505c3c17a952ec872bcaac">00309</a>         <span class="keyword">inline</span> <span class="keywordtype">size_t</span> getDefaultMembersHashSize()
<a name="l00310"></a>00310         { <span class="keywordflow">return</span> defaultMembersHashSize; }
<a name="l00311"></a>00311 
<a name="l00312"></a>00312 <span class="keyword">protected</span>:
<a name="l00313"></a>00313 
<a name="l00327"></a>00327         <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>(uint32 initialSize = defaultMembersHashSize);
<a name="l00328"></a>00328 
<a name="l00333"></a>00333         <span class="keyword">inline</span> <span class="keyword">virtual</span>
<a name="l00334"></a><a class="code" href="class_membership_bookkeeping.html#a01a57bbe5175adcf7a79677d6e6a7425">00334</a>         ~<a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>()
<a name="l00335"></a>00335         { endMembers(); }
<a name="l00336"></a>00336 
<a name="l00337"></a>00337         <span class="keyword">struct </span>SyncSourceLink;
<a name="l00338"></a>00338 
<a name="l00339"></a><a class="code" href="class_membership_bookkeeping.html#a38efd69069fee738eff8bb17de488361">00339</a>         <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getLink(<span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source)<span class="keyword"> const</span>
<a name="l00340"></a>00340 <span class="keyword">        </span>{ <span class="keywordflow">return</span> <span class="keyword">static_cast&lt;</span><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>*<span class="keyword">&gt;</span>(<a class="code" href="class_sync_source_handler.html#a1f835cb89ba9c5102e948a8c0e0102b2" title="This requires SyncSource - SyncSourceHandler friendship.">SyncSourceHandler::getLink</a>(source)); }
<a name="l00345"></a><a class="code" href="class_membership_bookkeeping.html#ad8f223d6677c5656ecf648b4ca250fd4">00345</a>         <span class="keyword">inline</span> <span class="keywordtype">bool</span> isMine(<span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; source)<span class="keyword"> const</span>
<a name="l00346"></a>00346 <span class="keyword">        </span>{ <span class="keywordflow">return</span> getLink(source)-&gt;getMembership() == <span class="keyword">this</span>; }
<a name="l00347"></a>00347 
<a name="l00354"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html">00354</a>         <span class="keyword">struct </span><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>
<a name="l00355"></a>00355         {
<a name="l00356"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a65f0fb2f22e9a0c00a0d76328751a55b">00356</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>(<a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>* pkt, <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* sLink,
<a name="l00357"></a>00357                                    <span class="keyword">struct</span> timeval&amp; recv_ts,
<a name="l00358"></a>00358                                    uint32 shifted_ts,
<a name="l00359"></a>00359                                    <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* sp,
<a name="l00360"></a>00360                                    <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* sn,
<a name="l00361"></a>00361                                    <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* p,
<a name="l00362"></a>00362                                    <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* n) :
<a name="l00363"></a>00363                         packet(pkt),
<a name="l00364"></a>00364                         sourceLink(sLink),
<a name="l00365"></a>00365                         prev(p), next(n),
<a name="l00366"></a>00366                         srcPrev(sp), srcNext(sn),
<a name="l00367"></a>00367                         receptionTime(recv_ts),
<a name="l00368"></a>00368                         shiftedTimestamp(shifted_ts)
<a name="l00369"></a>00369                 { }
<a name="l00370"></a>00370 
<a name="l00371"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a4e5d39146e6f8133c469c610f7bd72de">00371</a>                 ~<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>()
<a name="l00372"></a>00372                 { }
<a name="l00373"></a>00373 
<a name="l00374"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a88eb18175cbb53ac4fe88a0354db7b38">00374</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getSourceLink()<span class="keyword"> const</span>
<a name="l00375"></a>00375 <span class="keyword">                </span>{ <span class="keywordflow">return</span> sourceLink; }
<a name="l00376"></a>00376 
<a name="l00377"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a13e18c8d112ae8b6abd5e1e94796f69b">00377</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setSourceLink(<a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* src)
<a name="l00378"></a>00378                 { sourceLink = src; }
<a name="l00379"></a>00379 
<a name="l00380"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a04e71ed5bc14e82fc97ac5b116b9e3a2">00380</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* getNext()<span class="keyword"> const</span>
<a name="l00381"></a>00381 <span class="keyword">                </span>{ <span class="keywordflow">return</span> next; }
<a name="l00382"></a>00382 
<a name="l00383"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a66dff6b467d817c577b728efe8f82308">00383</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setNext(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* nl)
<a name="l00384"></a>00384                 { next = nl; }
<a name="l00385"></a>00385 
<a name="l00386"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a4f367c9bae3b82c2f90a489221751252">00386</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* getPrev()<span class="keyword"> const</span>
<a name="l00387"></a>00387 <span class="keyword">                </span>{ <span class="keywordflow">return</span> prev; }
<a name="l00388"></a>00388 
<a name="l00389"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a7c4b5411b56543182a38f63a39d37092">00389</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setPrev(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* pl)
<a name="l00390"></a>00390                 { prev = pl; }
<a name="l00391"></a>00391 
<a name="l00392"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a6e99ece4ec344303a052e061a66e2913">00392</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* getSrcNext()<span class="keyword"> const</span>
<a name="l00393"></a>00393 <span class="keyword">                </span>{ <span class="keywordflow">return</span> srcNext; }
<a name="l00394"></a>00394 
<a name="l00395"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a9637081f9307e00ae62dc65ec9449bbc">00395</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setSrcNext(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* sn)
<a name="l00396"></a>00396                 { srcNext = sn; }
<a name="l00397"></a>00397 
<a name="l00398"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#ae4ff91246ba0a380417e6c6e415d3916">00398</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* getSrcPrev()<span class="keyword"> const</span>
<a name="l00399"></a>00399 <span class="keyword">                </span>{ <span class="keywordflow">return</span> srcPrev; }
<a name="l00400"></a>00400 
<a name="l00401"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#af668a1c2bb9684b24bfbbd0305820d3a">00401</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setSrcPrev(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* sp)
<a name="l00402"></a>00402                 { srcPrev = sp; }
<a name="l00403"></a>00403 
<a name="l00404"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a00f54b45aedd8d0a7eba61a07325b0c5">00404</a>                 <span class="keyword">inline</span> <a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>* getPacket()<span class="keyword"> const</span>
<a name="l00405"></a>00405 <span class="keyword">                </span>{ <span class="keywordflow">return</span> packet; }
<a name="l00406"></a>00406 
<a name="l00407"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a7f33aa50db47ceba3ac1e471e89af1b3">00407</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setPacket(<a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>* pkt)
<a name="l00408"></a>00408                 { packet = pkt; }
<a name="l00409"></a>00409 
<a name="l00417"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a58e9fc4881c752949f61a8825b1b26f4">00417</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setRecvTime(<span class="keyword">const</span> timeval &amp;t)
<a name="l00418"></a>00418                 { receptionTime = t; }
<a name="l00419"></a>00419 
<a name="l00423"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a11127dc0e906f2fda739a4d33f4e26b5">00423</a>                 <span class="keyword">inline</span> timeval getRecvTime()<span class="keyword"> const</span>
<a name="l00424"></a>00424 <span class="keyword">                </span>{ <span class="keywordflow">return</span> receptionTime; }
<a name="l00425"></a>00425 
<a name="l00434"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#ab3cf2017193fd6c85cc840ddcd312432">00434</a>                 <span class="keyword">inline</span> uint32 getTimestamp()<span class="keyword"> const</span>
<a name="l00435"></a>00435 <span class="keyword">                </span>{ <span class="keywordflow">return</span> shiftedTimestamp; }
<a name="l00436"></a>00436 
<a name="l00437"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#ad4d0b1e29100ecde26dc2972218952f8">00437</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setTimestamp(uint32 ts)
<a name="l00438"></a>00438                 { shiftedTimestamp = ts;}
<a name="l00439"></a>00439 
<a name="l00440"></a>00440                 <span class="comment">// the packet this link refers to.</span>
<a name="l00441"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a97fbc480075b62fa27c50f54871ad66d">00441</a>                 <a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>* packet;
<a name="l00442"></a>00442                 <span class="comment">// the synchronization source this packet comes from.</span>
<a name="l00443"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a86a78b95f5bcaeb91ca5a440b676f8dd">00443</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* sourceLink;
<a name="l00444"></a>00444                 <span class="comment">// global incoming packet queue links.</span>
<a name="l00445"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a843e7eb8a7f07a24919bca4685693bfa">00445</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* prev, * next;
<a name="l00446"></a>00446                 <span class="comment">// source specific incoming packet queue links.</span>
<a name="l00447"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#ab08f221d3a556a08cae792ebfccf9ea1">00447</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* srcPrev, * srcNext;
<a name="l00448"></a>00448                 <span class="comment">// time this packet was received at</span>
<a name="l00449"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a0030a2dff5a85921f3aac6d00f051deb">00449</a>                 <span class="keyword">struct </span>timeval receptionTime;
<a name="l00450"></a>00450                 <span class="comment">// timestamp of the packet in host order and after</span>
<a name="l00451"></a>00451                 <span class="comment">// substracting the initial timestamp for its source</span>
<a name="l00452"></a>00452                 <span class="comment">// (it is an increment from the initial timestamp).</span>
<a name="l00453"></a><a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html#a3297031c120d89a85249937343dc0780">00453</a>                 uint32 shiftedTimestamp;
<a name="l00454"></a>00454         };
<a name="l00455"></a>00455 
<a name="l00472"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html">00472</a>         <span class="keyword">struct </span><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>
<a name="l00473"></a>00473         {
<a name="l00474"></a>00474                 <span class="comment">// 2^16</span>
<a name="l00475"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a852e1f3d339c836642c743ce901e3832">00475</a>                 <span class="keyword">static</span> <span class="keyword">const</span> uint32 SEQNUMMOD;
<a name="l00476"></a>00476 
<a name="l00477"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#af65acac5ec06ef6d31b37a21abece1e6">00477</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>(<a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>* m,
<a name="l00478"></a>00478                                <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* s,
<a name="l00479"></a>00479                                <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* fp = NULL,
<a name="l00480"></a>00480                                <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* lp = NULL,
<a name="l00481"></a>00481                                <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* ps = NULL,
<a name="l00482"></a>00482                                <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* ns = NULL,
<a name="l00483"></a>00483                                <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* ncollis = NULL) :
<a name="l00484"></a>00484                         membership(m), source(s), first(fp), last(lp),
<a name="l00485"></a>00485                         prev(ps), next(ns), nextCollis(ncollis),
<a name="l00486"></a>00486                         prevConflict(NULL)
<a name="l00487"></a>00487                 { m-&gt;<a class="code" href="class_sync_source_handler.html#ab81fe348ff9772693fc27ae4751d24b4">setLink</a>(*s,<span class="keyword">this</span>); <span class="comment">// record that the source is associated</span>
<a name="l00488"></a>00488                   initStats();         <span class="comment">// to this link.</span>
<a name="l00489"></a>00489                 }
<a name="l00490"></a>00490 
<a name="l00494"></a>00494                 ~<a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>();
<a name="l00495"></a>00495 
<a name="l00496"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#acdcad484ec75abe3b38693fd0752df3b">00496</a>                 <span class="keyword">inline</span> <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>* getMembership()
<a name="l00497"></a>00497                 { <span class="keywordflow">return</span> membership; }
<a name="l00498"></a>00498 
<a name="l00503"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a6df0a555b55e6ee6ca7ab78159f05510">00503</a>                 <span class="keyword">inline</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a6df0a555b55e6ee6ca7ab78159f05510" title="Get the synchronization source object this link objet holds information for.">getSource</a>() { <span class="keywordflow">return</span> source; }
<a name="l00504"></a>00504 
<a name="l00509"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a719caecf8d49a2006bc2a2f32fbea02d">00509</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* getFirst()
<a name="l00510"></a>00510                 { <span class="keywordflow">return</span> first; }
<a name="l00511"></a>00511 
<a name="l00512"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a8e8854f095a02ec7518a34e0ee9d9c4a">00512</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setFirst(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* fp)
<a name="l00513"></a>00513                 { first = fp; }
<a name="l00514"></a>00514 
<a name="l00519"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#ad3799129ae2836c8729426096122ff6a">00519</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* getLast()
<a name="l00520"></a>00520                 { <span class="keywordflow">return</span> last; }
<a name="l00521"></a>00521 
<a name="l00522"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a005c22ee40763a650d9c59f4ae2fe9d0">00522</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setLast(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* lp)
<a name="l00523"></a>00523                 { last = lp; }
<a name="l00524"></a>00524 
<a name="l00528"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a35405c370409a807761f7c0ede698eac">00528</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getPrev()
<a name="l00529"></a>00529                 { <span class="keywordflow">return</span> prev; }
<a name="l00530"></a>00530 
<a name="l00531"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#af6a5c77d5b08bf601076694ecaed4442">00531</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setPrev(<a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* ps)
<a name="l00532"></a>00532                 { prev = ps; }
<a name="l00533"></a>00533 
<a name="l00537"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#afc4718cde8c39619b6ea3a6ef0e5171b">00537</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getNext()
<a name="l00538"></a>00538                 { <span class="keywordflow">return</span> next; }
<a name="l00539"></a>00539 
<a name="l00540"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a16ddc491ef18c974f07224cdd91f4ef3">00540</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setNext(<a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a> *ns)
<a name="l00541"></a>00541                 { next = ns; }
<a name="l00542"></a>00542 
<a name="l00549"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#abddfbe163a7b4abc83383db3dbcbf869">00549</a>                 <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getNextCollis()
<a name="l00550"></a>00550                 { <span class="keywordflow">return</span> nextCollis; }
<a name="l00551"></a>00551 
<a name="l00552"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a5f2a8c6ec0be4c6af6b729ce704b7c19">00552</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setNextCollis(<a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* ns)
<a name="l00553"></a>00553                 { nextCollis = ns; }
<a name="l00554"></a>00554 
<a name="l00555"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a7242e11a98a33a2e4dba1e47bd0fe832">00555</a>                 <span class="keyword">inline</span> ConflictingTransportAddress* getPrevConflict()<span class="keyword"> const</span>
<a name="l00556"></a>00556 <span class="keyword">                </span>{ <span class="keywordflow">return</span> prevConflict; }
<a name="l00557"></a>00557 
<a name="l00561"></a>00561                 <span class="keywordtype">void</span> setPrevConflict(InetAddress&amp; addr, tpport_t dataPort,
<a name="l00562"></a>00562                                      tpport_t controlPort);
<a name="l00563"></a>00563 
<a name="l00564"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a739bd4d04b5d4e4d7cd11bb83219987c">00564</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* getSenderInfo()
<a name="l00565"></a>00565                 { <span class="keywordflow">return</span> senderInfo; }
<a name="l00566"></a>00566 
<a name="l00567"></a>00567                 <span class="keywordtype">void</span> setSenderInfo(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* si);
<a name="l00568"></a>00568 
<a name="l00569"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a2260624b1362104702f21ea57f193b1d">00569</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* getReceiverInfo()
<a name="l00570"></a>00570                 { <span class="keywordflow">return</span> receiverInfo; }
<a name="l00571"></a>00571 
<a name="l00572"></a>00572                 <span class="keywordtype">void</span> setReceiverInfo(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* ri);
<a name="l00573"></a>00573 
<a name="l00574"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#abba91d0bae41709b91d54f8bf2c7861f">00574</a>                 <span class="keyword">inline</span> timeval getLastPacketTime()<span class="keyword"> const</span>
<a name="l00575"></a>00575 <span class="keyword">                </span>{ <span class="keywordflow">return</span> lastPacketTime; }
<a name="l00576"></a>00576 
<a name="l00577"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a1f7f4b5a26fa16dec6e4b54e089b680e">00577</a>                 <span class="keyword">inline</span> timeval getLastRTCPPacketTime()<span class="keyword"> const</span>
<a name="l00578"></a>00578 <span class="keyword">                </span>{ <span class="keywordflow">return</span> lastRTCPPacketTime; }
<a name="l00579"></a>00579 
<a name="l00580"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a68f65a008785cee070704479692dc4ea">00580</a>                 <span class="keyword">inline</span> timeval getLastRTCPSRTime()<span class="keyword"> const</span>
<a name="l00581"></a>00581 <span class="keyword">                </span>{ <span class="keywordflow">return</span> lastRTCPSRTime; }
<a name="l00582"></a>00582 
<a name="l00587"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a7d7bd34dc46a0b2d3406fc10b73f7d9e">00587</a>                 <span class="keyword">inline</span> uint32 getObservedPacketCount()<span class="keyword"> const</span>
<a name="l00588"></a>00588 <span class="keyword">                </span>{ <span class="keywordflow">return</span> obsPacketCount; }
<a name="l00589"></a>00589 
<a name="l00590"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a4ff32831b71d8b3bf36542ebcc274c85">00590</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> incObservedPacketCount()
<a name="l00591"></a>00591                 { obsPacketCount++; }
<a name="l00592"></a>00592 
<a name="l00597"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#adee1fbb50291c784cbc66b2eb14b9b49">00597</a>                 <span class="keyword">inline</span> uint32 getObservedOctetCount()<span class="keyword"> const</span>
<a name="l00598"></a>00598 <span class="keyword">                </span>{ <span class="keywordflow">return</span> obsOctetCount; }
<a name="l00599"></a>00599 
<a name="l00600"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a6d811b276109480ad261b131b93c93eb">00600</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> incObservedOctetCount(uint32 n)
<a name="l00601"></a>00601                 { obsOctetCount += n; }
<a name="l00602"></a>00602 
<a name="l00606"></a>00606                 uint16
<a name="l00607"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aea54d24a2d1763105bb528bd40d3f6a0">00607</a>                 getMaxSeqNum()<span class="keyword"> const</span>
<a name="l00608"></a>00608 <span class="keyword">                </span>{ <span class="keywordflow">return</span> maxSeqNum; }
<a name="l00609"></a>00609 
<a name="l00614"></a>00614                 <span class="keywordtype">void</span>
<a name="l00615"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a46fc4db4fdae2fb0b172838d309615eb">00615</a>                 setMaxSeqNum(uint16 max)
<a name="l00616"></a>00616                 { maxSeqNum = max; }
<a name="l00617"></a>00617 
<a name="l00618"></a>00618                 <span class="keyword">inline</span> uint32
<a name="l00619"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a15daffa1838300538c0f1121f07c7591">00619</a>                 getExtendedMaxSeqNum()<span class="keyword"> const</span>
<a name="l00620"></a>00620 <span class="keyword">                </span>{ <span class="keywordflow">return</span> extendedMaxSeqNum; }
<a name="l00621"></a>00621 
<a name="l00622"></a>00622                 <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00623"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a13998019e08ac349f77f3ca7f02ec306">00623</a>                 setExtendedMaxSeqNum(uint32 seq)
<a name="l00624"></a>00624                 { extendedMaxSeqNum = seq; }
<a name="l00625"></a>00625 
<a name="l00626"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a972827fc15dd0c48a5a3f788efe6e10f">00626</a>                 <span class="keyword">inline</span> uint32 getCumulativePacketLost()<span class="keyword"> const</span>
<a name="l00627"></a>00627 <span class="keyword">                </span>{ <span class="keywordflow">return</span> cumulativePacketLost; }
<a name="l00628"></a>00628 
<a name="l00629"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a79758adda4d3089804bd8a568e174741">00629</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setCumulativePacketLost(uint32 pl)
<a name="l00630"></a>00630                 { cumulativePacketLost = pl; }
<a name="l00631"></a>00631 
<a name="l00632"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a3fba0cbb528d11e8564beaa6a8538b72">00632</a>                 <span class="keyword">inline</span> uint8 getFractionLost()<span class="keyword"> const</span>
<a name="l00633"></a>00633 <span class="keyword">                </span>{ <span class="keywordflow">return</span> fractionLost; }
<a name="l00634"></a>00634 
<a name="l00635"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aa6bfbccddd0c330a5898eb63402d4d45">00635</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setFractionLost(uint8 fl)
<a name="l00636"></a>00636                 { fractionLost = fl; }
<a name="l00637"></a>00637 
<a name="l00638"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#abae208c9b46feda9f9881ca2598965b9">00638</a>                 <span class="keyword">inline</span> uint32 getLastPacketTransitTime()
<a name="l00639"></a>00639                 { <span class="keywordflow">return</span> lastPacketTransitTime; }
<a name="l00640"></a>00640 
<a name="l00641"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a5bfad16d426655c96ba33f7e78b2bca7">00641</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setLastPacketTransitTime(uint32 time)
<a name="l00642"></a>00642                 { lastPacketTransitTime = time; }
<a name="l00643"></a>00643 
<a name="l00644"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aa3bbcfce33b74b246542330ea3419472">00644</a>                 <span class="keyword">inline</span> <span class="keywordtype">float</span> getJitter()<span class="keyword"> const</span>
<a name="l00645"></a>00645 <span class="keyword">                </span>{ <span class="keywordflow">return</span> jitter; }
<a name="l00646"></a>00646 
<a name="l00647"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a5a54dba2f396f154a890291b90f80fb1">00647</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setJitter(<span class="keywordtype">float</span> j)
<a name="l00648"></a>00648                 { jitter = j; }
<a name="l00649"></a>00649 
<a name="l00650"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#afe92c263f598eabe4da4ac200f0141fa">00650</a>                 <span class="keyword">inline</span> uint32 getInitialDataTimestamp()<span class="keyword"> const</span>
<a name="l00651"></a>00651 <span class="keyword">                </span>{ <span class="keywordflow">return</span> initialDataTimestamp; }
<a name="l00652"></a>00652 
<a name="l00653"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aad5d51429653b10da1db4f070d3dda09">00653</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setInitialDataTimestamp(uint32 ts)
<a name="l00654"></a>00654                 { initialDataTimestamp = ts; }
<a name="l00655"></a>00655 
<a name="l00656"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#ae5a01558d84852691e0bd66af5b95478">00656</a>                 <span class="keyword">inline</span> timeval getInitialDataTime()<span class="keyword"> const</span>
<a name="l00657"></a>00657 <span class="keyword">                </span>{ <span class="keywordflow">return</span> initialDataTime; }
<a name="l00658"></a>00658 
<a name="l00659"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a42058f388726eaab16b9b973c20b63bb">00659</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setInitialDataTime(timeval it)
<a name="l00660"></a>00660                 { initialDataTime = it; }
<a name="l00661"></a>00661 
<a name="l00669"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a5e72df736c13e1b9665835e65a7791e4">00669</a>                 <span class="keywordtype">bool</span> getGoodbye()
<a name="l00670"></a>00670                 {
<a name="l00671"></a>00671                         <span class="keywordflow">if</span>(!flag)
<a name="l00672"></a>00672                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00673"></a>00673                         flag = <span class="keyword">false</span>;
<a name="l00674"></a>00674                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00675"></a>00675                 }
<a name="l00676"></a>00676 
<a name="l00683"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a806b1fc8f2f4fd0231b9599d15da0717">00683</a>                 <span class="keywordtype">bool</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a806b1fc8f2f4fd0231b9599d15da0717" title="Mark this source as having sent some packet.">getHello</a>() {
<a name="l00684"></a>00684                         <span class="keywordflow">if</span>(flag)
<a name="l00685"></a>00685                                 <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00686"></a>00686                         flag = <span class="keyword">true</span>;
<a name="l00687"></a>00687                         <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00688"></a>00688                 }
<a name="l00689"></a>00689 
<a name="l00690"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a23b145369103afc237edea45c93c706c">00690</a>                 <span class="keyword">inline</span> uint32 getBadSeqNum()<span class="keyword"> const</span>
<a name="l00691"></a>00691 <span class="keyword">                </span>{ <span class="keywordflow">return</span> badSeqNum; }
<a name="l00692"></a>00692 
<a name="l00693"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a190e13fef354d9966cc86d47bc4afd51">00693</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setBadSeqNum(uint32 seq)
<a name="l00694"></a>00694                 { badSeqNum = seq; }
<a name="l00695"></a>00695 
<a name="l00696"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a9abed6aa0b5c430a12796a2211327b41">00696</a>                 uint8 getProbation()<span class="keyword"> const</span>
<a name="l00697"></a>00697 <span class="keyword">                </span>{ <span class="keywordflow">return</span> probation; }
<a name="l00698"></a>00698 
<a name="l00699"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a6e8936ff12dbdef50cb191ade775c8d8">00699</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> setProbation(uint8 p)
<a name="l00700"></a>00700                 { probation = p; }
<a name="l00701"></a>00701 
<a name="l00702"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a45206a0299668ac931f3c0f71f6f963b">00702</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> decProbation()
<a name="l00703"></a>00703                 { --probation; }
<a name="l00704"></a>00704 
<a name="l00705"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a5ef57843033cef095a6f0c30cbfac0f4">00705</a>                 <span class="keywordtype">bool</span> isValid()<span class="keyword"> const</span>
<a name="l00706"></a>00706 <span class="keyword">                </span>{ <span class="keywordflow">return</span> 0 == probation; }
<a name="l00707"></a>00707 
<a name="l00708"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#ad332a9b9ce13f7420d61cfffa81bc1ab">00708</a>                 <span class="keyword">inline</span> uint16 getBaseSeqNum()<span class="keyword"> const</span>
<a name="l00709"></a>00709 <span class="keyword">                </span>{ <span class="keywordflow">return</span> baseSeqNum; }
<a name="l00710"></a>00710 
<a name="l00711"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a4d7369aab5be0af94abb340d30e539aa">00711</a>                 <span class="keyword">inline</span> uint32 getSeqNumAccum()<span class="keyword"> const</span>
<a name="l00712"></a>00712 <span class="keyword">                </span>{ <span class="keywordflow">return</span> seqNumAccum; }
<a name="l00713"></a>00713 
<a name="l00714"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a321efaba057943b47c19146ab8a19c47">00714</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> incSeqNumAccum()
<a name="l00715"></a>00715                 { seqNumAccum += SEQNUMMOD; }
<a name="l00716"></a>00716 
<a name="l00720"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a2c9843f9f556a1e3cd85b1b5af8d77e9">00720</a>                 <span class="keyword">inline</span> <span class="keywordtype">void</span> initSequence(uint16 seqnum)
<a name="l00721"></a>00721                 { maxSeqNum = seqNumAccum = seqnum; }
<a name="l00722"></a>00722 
<a name="l00733"></a>00733                 <span class="keywordtype">void</span> recordInsertion(<span class="keyword">const</span> <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>&amp; pl);
<a name="l00734"></a>00734 
<a name="l00735"></a>00735                 <span class="keywordtype">void</span> initStats();
<a name="l00736"></a>00736 
<a name="l00741"></a>00741                 <span class="keywordtype">void</span> computeStats();
<a name="l00742"></a>00742 
<a name="l00743"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a091b489d89bae81382704df8b2f1dd65">00743</a>                 <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>* membership;
<a name="l00744"></a>00744                 <span class="comment">// The source this link object refers to.</span>
<a name="l00745"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a456f6c4d1f704fa6533726e5499170f1">00745</a>                 <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* source;
<a name="l00746"></a>00746                 <span class="comment">// first/last packets from this source in the queue.</span>
<a name="l00747"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a330d1dcdbf631256d9c29f13f32fabdb">00747</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* first, * last;
<a name="l00748"></a>00748                 <span class="comment">// Links for synchronization sources located before</span>
<a name="l00749"></a>00749                 <span class="comment">// and after this one in the list of sources.</span>
<a name="l00750"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#ab7f956c4390f7711b12a2ed230591056">00750</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* prev, * next;
<a name="l00751"></a>00751                 <span class="comment">// Prev and next inside the hash table collision list.</span>
<a name="l00752"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a9182ce5cbb9510192cbd0ff374fcb197">00752</a>                 <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* nextCollis;
<a name="l00753"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aca34ad3dc60db8e147dda54c01c9160b">00753</a>                 ConflictingTransportAddress* prevConflict;
<a name="l00754"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a8cf30b73c7cf5853a041a3ebdd2288b9">00754</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* senderInfo;
<a name="l00755"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a09f7fa08b97a128cda2ee24aac3090b6">00755</a>                 <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* receiverInfo;
<a name="l00756"></a>00756                 <span class="comment">// time the last RTP packet from this source was</span>
<a name="l00757"></a>00757                 <span class="comment">// received at.</span>
<a name="l00758"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a0be0c14e56bc1f4b826a7ca4380ea03d">00758</a>                 timeval lastPacketTime;
<a name="l00759"></a>00759                 <span class="comment">// time the last RTCP packet was received.</span>
<a name="l00760"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aeb8b3a80cd3e7218fae2593ab6682542">00760</a>                 timeval lastRTCPPacketTime;
<a name="l00761"></a>00761                 <span class="comment">// time the lasrt RTCP SR was received. Required for</span>
<a name="l00762"></a>00762                 <span class="comment">// DLSR computation.</span>
<a name="l00763"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aac6084e1c742bd6833ae1adee1cdfa7b">00763</a>                 timeval lastRTCPSRTime;
<a name="l00764"></a>00764 
<a name="l00765"></a>00765                 <span class="comment">// for outgoing RR reports.</span>
<a name="l00766"></a>00766                 <span class="comment">// number of packets received from this source.</span>
<a name="l00767"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#ab37875ea81e94f943e5b1d43e02f3062">00767</a>                 uint32 obsPacketCount;
<a name="l00768"></a>00768                 <span class="comment">// number of octets received from this source.</span>
<a name="l00769"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a37ffb829e80db89147feb0215e6a5453">00769</a>                 uint32 obsOctetCount;
<a name="l00770"></a>00770                 <span class="comment">// the higher sequence number seen from this source</span>
<a name="l00771"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a1604f5aa074c643dfb2612201d8f29a5">00771</a>                 uint16 maxSeqNum;
<a name="l00772"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a7ff7cbe21fe1178a7a2467018fed408a">00772</a>                 uint32 extendedMaxSeqNum;
<a name="l00773"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aa28d05e67552cc02d21153c070eee3f4">00773</a>                 uint32 cumulativePacketLost;
<a name="l00774"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a92d687a6bfb72ba9e93416e590f7020a">00774</a>                 uint8 fractionLost;
<a name="l00775"></a>00775                 <span class="comment">// for interarrivel jitter computation</span>
<a name="l00776"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a73aa3224c2ff9d754016e157a57227da">00776</a>                 uint32 lastPacketTransitTime;
<a name="l00777"></a>00777                 <span class="comment">// interarrival jitter of packets from this source.</span>
<a name="l00778"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a26edc69418c9986e766872fd9b5d393d">00778</a>                 <span class="keywordtype">float</span> jitter;
<a name="l00779"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a5fb0ac209c4d1338c743125f44444896">00779</a>                 uint32 initialDataTimestamp;
<a name="l00780"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a4ef9892a1fca4b78ede15d5c46107a16">00780</a>                 timeval initialDataTime;
<a name="l00781"></a>00781 
<a name="l00782"></a>00782                 <span class="comment">// this flag assures we only call one gotHello and one</span>
<a name="l00783"></a>00783                 <span class="comment">// gotGoodbye for this src.</span>
<a name="l00784"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#adc284b6475d1dde076f894dc26f0b0b4">00784</a>                 <span class="keywordtype">bool</span> flag;
<a name="l00785"></a>00785 
<a name="l00786"></a>00786                 <span class="comment">// for source validation:</span>
<a name="l00787"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a21b9dc101269a55e769e3a06e4ab3149">00787</a>                 uint32 badSeqNum;
<a name="l00788"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#abf00a3c0872211d33a6f3c8792434e24">00788</a>                 uint8 probation;  <span class="comment">// packets in sequence before valid.</span>
<a name="l00789"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a119842736d4f3e93468287d2efe6de70">00789</a>                 uint16 baseSeqNum;
<a name="l00790"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a559925b6b0817192de001534dd3094c1">00790</a>                 uint32 expectedPrior;
<a name="l00791"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#a13ccbbd8d8eded7ed21c818f46b2cd5d">00791</a>                 uint32 receivedPrior;
<a name="l00792"></a><a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html#aac962665f541902180f1479156897323">00792</a>                 uint32 seqNumAccum;
<a name="l00793"></a>00793         };
<a name="l00794"></a>00794 
<a name="l00799"></a>00799         <span class="keywordtype">bool</span>
<a name="l00800"></a>00800         isRegistered(uint32 ssrc);
<a name="l00801"></a>00801 
<a name="l00810"></a>00810         <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>*
<a name="l00811"></a>00811         getSourceBySSRC(uint32 ssrc, <span class="keywordtype">bool</span>&amp; created);
<a name="l00812"></a>00812 
<a name="l00823"></a>00823         <span class="keywordtype">bool</span>
<a name="l00824"></a>00824         BYESource(uint32 ssrc);
<a name="l00825"></a>00825 
<a name="l00833"></a>00833         <span class="keywordtype">bool</span>
<a name="l00834"></a>00834         removeSource(uint32 ssrc);
<a name="l00835"></a>00835 
<a name="l00836"></a><a class="code" href="class_membership_bookkeeping.html#a27e96c52e49965aa6a7ab2c9ae39233f">00836</a>         <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getFirst()
<a name="l00837"></a>00837         { <span class="keywordflow">return</span> first; }
<a name="l00838"></a>00838 
<a name="l00839"></a><a class="code" href="class_membership_bookkeeping.html#a4f1d99b0ff59e1be893087b4832abfd7">00839</a>         <span class="keyword">inline</span> <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* getLast()
<a name="l00840"></a>00840         { <span class="keywordflow">return</span> last; }
<a name="l00841"></a>00841 
<a name="l00842"></a>00842         <span class="keyword">inline</span> uint32
<a name="l00843"></a><a class="code" href="class_membership_bookkeeping.html#aa9d008b64658b94d2e114c32ece8b70b">00843</a>         getMembersCount()
<a name="l00844"></a>00844         { <span class="keywordflow">return</span> <a class="code" href="class_members.html#a205cd2ecae12d4b9311a4dc3b88bfa21">Members::getMembersCount</a>(); }
<a name="l00845"></a>00845 
<a name="l00846"></a>00846         <span class="keyword">inline</span> <span class="keywordtype">void</span>
<a name="l00847"></a><a class="code" href="class_membership_bookkeeping.html#a4c5325d929921e93ab98272d3e23a180">00847</a>         setMembersCount(uint32 n)
<a name="l00848"></a>00848         { <a class="code" href="class_members.html#a12075b685cfc7b7aedfe36751e555e1b">Members::setMembersCount</a>(n); }
<a name="l00849"></a>00849 
<a name="l00850"></a>00850         <span class="keyword">inline</span> uint32
<a name="l00851"></a><a class="code" href="class_membership_bookkeeping.html#a8449f626c59c5549c2c9e8c79718456f">00851</a>         getSendersCount()
<a name="l00852"></a>00852         { <span class="keywordflow">return</span> <a class="code" href="class_members.html#a25289bdc35d487d930e146605d7f3f9f">Members::getSendersCount</a>(); }
<a name="l00853"></a>00853 
<a name="l00854"></a><a class="code" href="class_membership_bookkeeping.html#a53ba5e9495dfdb9ec16c551206796d99">00854</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> defaultMembersHashSize;
<a name="l00855"></a><a class="code" href="class_membership_bookkeeping.html#a07aaed6db929c59a302e9cb68405ef71">00855</a>         <span class="keyword">static</span> <span class="keyword">const</span> uint32 SEQNUMMOD;
<a name="l00856"></a>00856 
<a name="l00857"></a>00857 <span class="keyword">private</span>:
<a name="l00858"></a>00858         <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>(<span class="keyword">const</span> <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a> &amp;o);
<a name="l00859"></a>00859 
<a name="l00860"></a>00860         <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>&amp;
<a name="l00861"></a>00861         operator=(<span class="keyword">const</span> <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a> &amp;o);
<a name="l00862"></a>00862 
<a name="l00867"></a>00867         <span class="keywordtype">void</span>
<a name="l00868"></a>00868         endMembers();
<a name="l00869"></a>00869 
<a name="l00870"></a>00870         <span class="comment">// Hash table with sources of RTP and RTCP packets</span>
<a name="l00871"></a>00871         uint32 sourceBucketsNum;
<a name="l00872"></a>00872         <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>** sourceLinks;
<a name="l00873"></a>00873         <span class="comment">// List of sources, ordered from older to newer</span>
<a name="l00874"></a>00874         <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a>* first, * last;
<a name="l00875"></a>00875 };
<a name="l00876"></a>00876 
<a name="l00883"></a><a class="code" href="class_incoming_data_queue.html">00883</a> <span class="keyword">class </span>__EXPORT <a class="code" href="class_incoming_data_queue.html" title="Queue for incoming RTP data packets in an RTP session.">IncomingDataQueue</a>: <span class="keyword">public</span> <a class="code" href="class_incoming_data_queue_base.html">IncomingDataQueueBase</a>,
<a name="l00884"></a>00884         <span class="keyword">protected</span> <a class="code" href="class_membership_bookkeeping.html" title="Controls the group membership in the current session.">MembershipBookkeeping</a>
<a name="l00885"></a>00885 {
<a name="l00886"></a>00886 <span class="keyword">public</span>:
<a name="l00892"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html">00892</a>         <span class="keyword">class </span><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>
<a name="l00893"></a>00893         {
<a name="l00894"></a>00894         <span class="keyword">public</span>:
<a name="l00895"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#a8824ed76a01a493480a61ffffcdb2c1b">00895</a>                 <span class="keyword">typedef</span> std::forward_iterator_tag iterator_category;
<a name="l00896"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#a197e71e511cf81c175566c5e0c35ee82">00896</a>                 <span class="keyword">typedef</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">value_type</a>;
<a name="l00897"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#aa38f91c72c4dadc04711f3d8e4cbca46">00897</a>                 <span class="keyword">typedef</span> ptrdiff_t difference_type;
<a name="l00898"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#ac6194bc577d5da738bed09be528a0d1c">00898</a>                 <span class="keyword">typedef</span> <span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">pointer</a>;
<a name="l00899"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#ae1f69cceb8b693ac50db29f449b868aa">00899</a>                 <span class="keyword">typedef</span> <span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp; <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">reference</a>;
<a name="l00900"></a>00900 
<a name="l00901"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#aedb20dc9bbf4ac99422428c94e39ef91">00901</a>                 <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>(SyncSourceLink* l = NULL) :
<a name="l00902"></a>00902                         link(l)
<a name="l00903"></a>00903                 { }
<a name="l00904"></a>00904 
<a name="l00905"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#aef1e2a4d4fafd21fbf02adba7d03b554">00905</a>                 <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>(<span class="keyword">const</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>&amp; si) :
<a name="l00906"></a>00906                         link(si.link)
<a name="l00907"></a>00907                 { }
<a name="l00908"></a>00908 
<a name="l00909"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#afd7cbde2c93ecbeb15ddf4be1a5d0780">00909</a>                 <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">reference</a> operator*()<span class="keyword"> const</span>
<a name="l00910"></a>00910 <span class="keyword">                </span>{ <span class="keywordflow">return</span> *(link-&gt;getSource()); }
<a name="l00911"></a>00911 
<a name="l00912"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#a83d2c7a00971fd7fd9aca901243d4758">00912</a>                 <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">pointer</a> operator-&gt;()<span class="keyword"> const</span>
<a name="l00913"></a>00913 <span class="keyword">                </span>{ <span class="keywordflow">return</span> link-&gt;getSource(); }
<a name="l00914"></a>00914 
<a name="l00915"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#ad865e609154236de0c979326217eac64">00915</a>                 <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>&amp; <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#ad865e609154236de0c979326217eac64">operator++</a>() {
<a name="l00916"></a>00916                         link = link-&gt;getNext();
<a name="l00917"></a>00917                         <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00918"></a>00918                 }
<a name="l00919"></a>00919 
<a name="l00920"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#adbb9dfb23fe24bd2c79f227ec17e0092">00920</a>                 <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#adbb9dfb23fe24bd2c79f227ec17e0092">operator++</a>(<span class="keywordtype">int</span>) {
<a name="l00921"></a>00921                         <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a> result(*<span class="keyword">this</span>);
<a name="l00922"></a>00922                         ++(*this);
<a name="l00923"></a>00923                         <span class="keywordflow">return</span> result;
<a name="l00924"></a>00924                 }
<a name="l00925"></a>00925 
<a name="l00926"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#a93fe03e14a432799944e03e657cc7c67">00926</a>                 <span class="keyword">friend</span> <span class="keywordtype">bool</span> operator==(<span class="keyword">const</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>&amp; l,
<a name="l00927"></a>00927                                        <span class="keyword">const</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>&amp; r)
<a name="l00928"></a>00928                 { <span class="keywordflow">return</span> l.link == r.link; }
<a name="l00929"></a>00929 
<a name="l00930"></a><a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html#ae01dc347f50a169f254924bee8874640">00930</a>                 <span class="keyword">friend</span> <span class="keywordtype">bool</span> operator!=(<span class="keyword">const</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>&amp; l,
<a name="l00931"></a>00931                                        <span class="keyword">const</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>&amp; r)
<a name="l00932"></a>00932                 { <span class="keywordflow">return</span> l.link != r.link; }
<a name="l00933"></a>00933 
<a name="l00934"></a>00934         <span class="keyword">private</span>:
<a name="l00935"></a>00935                 <a class="code" href="struct_membership_bookkeeping_1_1_sync_source_link.html" title="Synchronization Source internal handler within the incoming packets queue.">SyncSourceLink</a> *link;
<a name="l00936"></a>00936         };
<a name="l00937"></a>00937 
<a name="l00938"></a><a class="code" href="class_incoming_data_queue.html#ae5a5e445035fbb67badde97b917bb396">00938</a>         <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a> begin()
<a name="l00939"></a>00939         { <span class="keywordflow">return</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>(<a class="code" href="class_membership_bookkeeping.html#a27e96c52e49965aa6a7ab2c9ae39233f">MembershipBookkeeping::getFirst</a>()); }
<a name="l00940"></a>00940 
<a name="l00941"></a><a class="code" href="class_incoming_data_queue.html#a717fd60c11da7f1b4d9544070e30d226">00941</a>         <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a> end()
<a name="l00942"></a>00942         { <span class="keywordflow">return</span> <a class="code" href="class_incoming_data_queue_1_1_sync_sources_iterator.html" title="iterator through the list of synchronizations sources in this session">SyncSourcesIterator</a>(NULL); }
<a name="l00943"></a>00943 
<a name="l00953"></a>00953         <span class="keyword">const</span> <a class="code" href="class_app_data_unit.html" title="Interface (envelope) to data received over RTP packets.">AppDataUnit</a>*
<a name="l00954"></a>00954         getData(uint32 stamp, <span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* src = NULL);
<a name="l00955"></a>00955 
<a name="l00956"></a>00956 
<a name="l00963"></a>00963         <span class="keywordtype">bool</span>
<a name="l00964"></a>00964         isWaiting(<span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* src = NULL) <span class="keyword">const</span>;
<a name="l00965"></a>00965 
<a name="l00972"></a>00972         uint32
<a name="l00973"></a>00973         getFirstTimestamp(<span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>* src = NULL) <span class="keyword">const</span>;
<a name="l00974"></a>00974 
<a name="l00997"></a>00997         <span class="keywordtype">void</span>
<a name="l00998"></a><a class="code" href="class_incoming_data_queue.html#a67c0dd360533faeaf3bd317fdf5fb8e3">00998</a>         setMinValidPacketSequence(uint8 packets)
<a name="l00999"></a>00999         { minValidPacketSequence = packets; }
<a name="l01000"></a>01000 
<a name="l01001"></a>01001         uint8
<a name="l01002"></a><a class="code" href="class_incoming_data_queue.html#aa63891f27d03ebf075ade0ab9629c012">01002</a>         getDefaultMinValidPacketSequence()<span class="keyword"> const</span>
<a name="l01003"></a>01003 <span class="keyword">        </span>{ <span class="keywordflow">return</span> defaultMinValidPacketSequence; }
<a name="l01004"></a>01004 
<a name="l01009"></a>01009         uint8
<a name="l01010"></a><a class="code" href="class_incoming_data_queue.html#acee16af6cefc82db3b31d023b67f6d8d">01010</a>         getMinValidPacketSequence()<span class="keyword"> const</span>
<a name="l01011"></a>01011 <span class="keyword">        </span>{ <span class="keywordflow">return</span> minValidPacketSequence; }
<a name="l01012"></a>01012 
<a name="l01013"></a>01013         <span class="keywordtype">void</span>
<a name="l01014"></a><a class="code" href="class_incoming_data_queue.html#a602ef8706aa0b5fb2fcee2695b7be98d">01014</a>         setMaxPacketMisorder(uint16 packets)
<a name="l01015"></a>01015         { maxPacketMisorder = packets; }
<a name="l01016"></a>01016 
<a name="l01017"></a>01017         uint16
<a name="l01018"></a><a class="code" href="class_incoming_data_queue.html#a2498e30b14e70ce2db42d98a25ef1880">01018</a>         getDefaultMaxPacketMisorder()<span class="keyword"> const</span>
<a name="l01019"></a>01019 <span class="keyword">        </span>{ <span class="keywordflow">return</span> defaultMaxPacketMisorder; }
<a name="l01020"></a>01020 
<a name="l01021"></a>01021         uint16
<a name="l01022"></a><a class="code" href="class_incoming_data_queue.html#a14f4d8c287a3f100258ed8a0e45d9759">01022</a>         getMaxPacketMisorder()<span class="keyword"> const</span>
<a name="l01023"></a>01023 <span class="keyword">        </span>{ <span class="keywordflow">return</span> maxPacketMisorder; }
<a name="l01024"></a>01024 
<a name="l01030"></a>01030         <span class="keywordtype">void</span>
<a name="l01031"></a><a class="code" href="class_incoming_data_queue.html#a731b655bf21873cfe3d24cff51c9c399">01031</a>         setMaxPacketDropout(uint16 packets) <span class="comment">// default: 3000.</span>
<a name="l01032"></a>01032         { maxPacketDropout = packets; }
<a name="l01033"></a>01033 
<a name="l01034"></a>01034         uint16
<a name="l01035"></a><a class="code" href="class_incoming_data_queue.html#a5c33852bc72267276849060ee0a25332">01035</a>         getDefaultMaxPacketDropout()<span class="keyword"> const</span>
<a name="l01036"></a>01036 <span class="keyword">        </span>{ <span class="keywordflow">return</span> defaultMaxPacketDropout; }
<a name="l01037"></a>01037 
<a name="l01038"></a>01038         uint16
<a name="l01039"></a><a class="code" href="class_incoming_data_queue.html#a7e7c15767869fdf758f67b64afaaca70">01039</a>         getMaxPacketDropout()<span class="keyword"> const</span>
<a name="l01040"></a>01040 <span class="keyword">        </span>{ <span class="keywordflow">return</span> maxPacketDropout; }
<a name="l01041"></a>01041 
<a name="l01042"></a>01042         <span class="comment">// default value for constructors that allow to specify</span>
<a name="l01043"></a>01043         <span class="comment">// members table s\ize</span>
<a name="l01044"></a>01044         <span class="keyword">inline</span> <span class="keyword">static</span> <span class="keywordtype">size_t</span>
<a name="l01045"></a><a class="code" href="class_incoming_data_queue.html#a71992a5b9daf02bc65fcc2ca351b9127">01045</a>         getDefaultMembersSize()
<a name="l01046"></a>01046         { <span class="keywordflow">return</span> defaultMembersSize; }
<a name="l01047"></a>01047 
<a name="l01056"></a>01056         <span class="keywordtype">void</span>
<a name="l01057"></a>01057         setInQueueCryptoContext(<a class="code" href="class_crypto_context.html" title="The implementation for a SRTP cryptographic context.">CryptoContext</a>* cc);
<a name="l01058"></a>01058 
<a name="l01069"></a>01069         <span class="keywordtype">void</span>
<a name="l01070"></a>01070         removeInQueueCryptoContext(<a class="code" href="class_crypto_context.html" title="The implementation for a SRTP cryptographic context.">CryptoContext</a>* cc);
<a name="l01071"></a>01071 
<a name="l01079"></a>01079         <a class="code" href="class_crypto_context.html" title="The implementation for a SRTP cryptographic context.">CryptoContext</a>*
<a name="l01080"></a>01080         getInQueueCryptoContext(uint32 ssrc);
<a name="l01081"></a>01081 
<a name="l01082"></a>01082 <span class="keyword">protected</span>:
<a name="l01086"></a>01086         <a class="code" href="class_incoming_data_queue.html" title="Queue for incoming RTP data packets in an RTP session.">IncomingDataQueue</a>(uint32 size);
<a name="l01087"></a>01087 
<a name="l01088"></a><a class="code" href="class_incoming_data_queue.html#a975f3457950992a17392a599e3b06813">01088</a>         <span class="keyword">virtual</span> ~<a class="code" href="class_incoming_data_queue.html" title="Queue for incoming RTP data packets in an RTP session.">IncomingDataQueue</a>()
<a name="l01089"></a>01089         { }
<a name="l01090"></a>01090 
<a name="l01103"></a>01103         <span class="keywordtype">bool</span> checkSSRCInIncomingRTPPkt(SyncSourceLink&amp; sourceLink,
<a name="l01104"></a>01104                                        <span class="keywordtype">bool</span> is_new, InetAddress&amp; na,
<a name="l01105"></a>01105                                        tpport_t tp);
<a name="l01106"></a>01106 
<a name="l01122"></a><a class="code" href="class_incoming_data_queue.html#a6c595148215e5bf4098ff0e13d1ccfb7">01122</a>         <span class="keywordtype">void</span> setSourceExpirationPeriod(uint8 intervals)
<a name="l01123"></a>01123         { sourceExpirationPeriod = intervals; }
<a name="l01124"></a>01124 
<a name="l01131"></a>01131         <span class="keyword">virtual</span> <span class="keywordtype">size_t</span>
<a name="l01132"></a>01132         takeInDataPacket();
<a name="l01133"></a>01133 
<a name="l01134"></a>01134         <span class="keywordtype">void</span> renewLocalSSRC();
<a name="l01135"></a>01135 
<a name="l01145"></a>01145         <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingDataQueue::IncomingRTPPktLink</a>*
<a name="l01146"></a>01146         getWaiting(uint32 timestamp, <span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a> *src = NULL);
<a name="l01147"></a>01147 
<a name="l01163"></a>01163         <span class="keywordtype">bool</span>
<a name="l01164"></a>01164         recordReception(SyncSourceLink&amp; srcLink, <span class="keyword">const</span> <a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>&amp; pkt,
<a name="l01165"></a>01165                         <span class="keyword">const</span> timeval recvtime);
<a name="l01166"></a>01166 
<a name="l01173"></a>01173         <span class="keywordtype">void</span>
<a name="l01174"></a>01174         recordExtraction(<span class="keyword">const</span> <a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>&amp; pkt);
<a name="l01175"></a>01175 
<a name="l01176"></a>01176         <span class="keywordtype">void</span> purgeIncomingQueue();
<a name="l01177"></a>01177 
<a name="l01184"></a>01184         <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span>
<a name="l01185"></a><a class="code" href="class_incoming_data_queue.html#a7b75da6823836f59673bafaa6b3859c4">01185</a>         onNewSyncSource(<span class="keyword">const</span> <a class="code" href="class_sync_source.html" title="Synchronization source in an RTP session.">SyncSource</a>&amp;)
<a name="l01186"></a>01186         { }
<a name="l01187"></a>01187 
<a name="l01188"></a>01188 <span class="keyword">protected</span>:
<a name="l01205"></a>01205         <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span>
<a name="l01206"></a><a class="code" href="class_incoming_data_queue.html#ab85042be854f1a366627f0ab3f5b800d">01206</a>         onRTPPacketRecv(<a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>&amp;)
<a name="l01207"></a>01207         { <span class="keywordflow">return</span> <span class="keyword">true</span>; }
<a name="l01208"></a>01208 
<a name="l01217"></a><a class="code" href="class_incoming_data_queue.html#a5d1fda86e7bf629ccb2fbc85a0edb27f">01217</a>         <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">void</span> onExpireRecv(<a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>&amp;)
<a name="l01218"></a>01218         { <span class="keywordflow">return</span>; }
<a name="l01219"></a>01219 
<a name="l01233"></a>01233         <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span>
<a name="l01234"></a><a class="code" href="class_incoming_data_queue.html#a9c3bfb8ae52bda2bff43f62784cf24d5">01234</a>         onSRTPPacketError(<a class="code" href="class_incoming_r_t_p_pkt.html" title="RTP packets received from other participants.">IncomingRTPPkt</a>&amp; pkt, int32 errorCode)
<a name="l01235"></a>01235         { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l01236"></a>01236 
<a name="l01237"></a>01237         <span class="keyword">inline</span> <span class="keyword">virtual</span> <span class="keywordtype">bool</span>
<a name="l01238"></a><a class="code" href="class_incoming_data_queue.html#a5f747ec737400666e0d410e66ab6246d">01238</a>         end2EndDelayed(<a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>&amp;)
<a name="l01239"></a>01239         { <span class="keywordflow">return</span> <span class="keyword">false</span>; }
<a name="l01240"></a>01240 
<a name="l01256"></a>01256         <span class="keywordtype">bool</span>
<a name="l01257"></a>01257         insertRecvPacket(IncomingRTPPktLink* packetLink);
<a name="l01258"></a>01258 
<a name="l01270"></a>01270         <span class="keyword">virtual</span> <span class="keywordtype">size_t</span>
<a name="l01271"></a>01271         recvData(<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span>* buffer, <span class="keywordtype">size_t</span> length,
<a name="l01272"></a>01272                  InetHostAddress&amp; host, tpport_t&amp; port) = 0;
<a name="l01273"></a>01273 
<a name="l01274"></a>01274         <span class="keyword">virtual</span> <span class="keywordtype">size_t</span>
<a name="l01275"></a>01275         getNextDataPacketSize() <span class="keyword">const</span> = 0;
<a name="l01276"></a>01276 
<a name="l01277"></a><a class="code" href="class_incoming_data_queue.html#adccf839d9a491cdf98fb2f4f3e13d5d7">01277</a>         <span class="keyword">mutable</span> ThreadLock recvLock;
<a name="l01278"></a>01278         <span class="comment">// reception queue</span>
<a name="l01279"></a><a class="code" href="class_incoming_data_queue.html#a5d5fc37470fbf038b374664dcfc96435">01279</a>         <a class="code" href="struct_membership_bookkeeping_1_1_incoming_r_t_p_pkt_link.html" title="Incoming RTP data packets control structure within the incoming packet queue class...">IncomingRTPPktLink</a>* recvFirst, * recvLast;
<a name="l01280"></a>01280         <span class="comment">// values for packet validation.</span>
<a name="l01281"></a><a class="code" href="class_incoming_data_queue.html#afd2b5c6ec4ef8eab87645a3cad177bd1">01281</a>         <span class="keyword">static</span> <span class="keyword">const</span> uint8 defaultMinValidPacketSequence;
<a name="l01282"></a><a class="code" href="class_incoming_data_queue.html#a8620d1560ddb2450505b06f3ab488698">01282</a>         <span class="keyword">static</span> <span class="keyword">const</span> uint16 defaultMaxPacketMisorder;
<a name="l01283"></a><a class="code" href="class_incoming_data_queue.html#a03c2083686a6352960ea364ff0247c0b">01283</a>         <span class="keyword">static</span> <span class="keyword">const</span> uint16 defaultMaxPacketDropout;
<a name="l01284"></a><a class="code" href="class_incoming_data_queue.html#a7f5902996f89705f0d85df36a9778787">01284</a>         uint8 minValidPacketSequence;
<a name="l01285"></a><a class="code" href="class_incoming_data_queue.html#a425682bbc96cc0401aafffea0fd59bbd">01285</a>         uint16 maxPacketMisorder;
<a name="l01286"></a><a class="code" href="class_incoming_data_queue.html#aadcc24fdfc96c87f0dfa7c3b6a9c64e8">01286</a>         uint16 maxPacketDropout;
<a name="l01287"></a><a class="code" href="class_incoming_data_queue.html#a01202d358cef0bf703b2991236b15c9e">01287</a>         <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">size_t</span> defaultMembersSize;
<a name="l01288"></a><a class="code" href="class_incoming_data_queue.html#a8d59b8ffbf0b1951e294650ab2a8ef8f">01288</a>         uint8 sourceExpirationPeriod;
<a name="l01289"></a><a class="code" href="class_incoming_data_queue.html#a963d974350fd1482bcd2e53ed9821afe">01289</a>         <span class="keyword">mutable</span> Mutex cryptoMutex;
<a name="l01290"></a><a class="code" href="class_incoming_data_queue.html#aff53fe9c29f8c092b9bfbad60934d420">01290</a>         std::list&lt;CryptoContext *&gt; cryptoContexts;
<a name="l01291"></a>01291 };
<a name="l01292"></a>01292  <span class="comment">// iqueue</span>
<a name="l01294"></a>01294 
<a name="l01295"></a>01295 <span class="preprocessor">#ifdef  CCXX_NAMESPACES</span>
<a name="l01296"></a>01296 <span class="preprocessor"></span>}
<a name="l01297"></a>01297 <span class="preprocessor">#endif</span>
<a name="l01298"></a>01298 <span class="preprocessor"></span>
<a name="l01299"></a>01299 <span class="preprocessor">#endif  //CCXX_RTP_IQUEUE_H_</span>
<a name="l01300"></a>01300 <span class="preprocessor"></span>
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Tue Sep 21 04:20:08 2010 for ccRTP by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
